<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>ai_shell.demo_bots.tool_tester_bot API documentation</title>
<meta name="description" content="An example bot that will check if a tool works as expected â€¦" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>ai_shell.demo_bots.tool_tester_bot</code></h1>
</header>
<section id="section-intro">
<p>An example bot that will check if a tool works as expected.</p>
<p>The goal checker will check if the user has used tools that need testing.</p>
<p>(To be clear, this isn't the unit testing bot, that's example_test_writer_bot.py)</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#34;&#34;&#34;
An example bot that will check if a tool works as expected.

The goal checker will check if the user has used tools that need testing.

(To be clear, this isn&#39;t the unit testing bot, that&#39;s example_test_writer_bot.py)
&#34;&#34;&#34;
import asyncio
import logging
import logging.config
import os

from dotenv import load_dotenv

import ai_shell

ai_shell.utils.logging_utils.LOGGING_ENABLED = True


async def main():
    load_dotenv()

    logger = logging.getLogger(__name__)
    config = ai_shell.configure_logging()
    logging.config.dictConfig(config)

    model = &#34;gpt-3.5-turbo-1106&#34;

    bot_instructions = &#34;You are a tool tester. You will test out tools and then provide a report on if they work the way you expected them to.&#34;
    tool_names = [
        &#34;query_todos_by_regex&#34;,
        &#34;remove_todo&#34;,
        &#34;add_todo&#34;,
        &#34;ls&#34;,
        &#34;cat_markdown&#34;,
        &#34;rewrite_file&#34;,
        &#34;write_new_file&#34;,
        &#34;grep&#34;,
        &#34;report_text&#34;,
        &#34;insert_text_after_context&#34;,
        &#34;insert_text_after_multiline_context&#34;,
        &#34;insert_text_at_start_or_end&#34;,
        &#34;replace_all&#34;,
        &#34;replace_line_by_line&#34;,
        &#34;replace_with_regex&#34;,
    ]
    bot_name = &#34;cat_markdown, insert, replace tool user.&#34;

    root_folder = &#34;src&#34;
    if not os.path.exists(root_folder):
        raise ValueError(&#34;The demo requires that there be a src folder with some python code in it.&#34;)
    dialog_logger_md = ai_shell.DialogLoggerWithMarkdown(root_folder)
    request = &#34;&#34;&#34;You are in the &#39;./&#39; folder. The base folder is &#39;./&#39;. You do not need to guess the pwd, it is &#39;./&#39;.

Now that is out of the way, use the tools available to you to make edits to files. Then check using tools to see if 
the edits worked the way you expected them to.

Report results using report_text. Then you are done.
```
    &#34;&#34;&#34;

    async def static_keep_going(_toolkit: ai_shell.ToolKit):
        return &#34;Do you feel that you have exercised all the tools? If so, report your results using report_text.&#34;

    config = ai_shell.Config()
    bot = ai_shell.TaskBot(
        config,
        bot_name,
        bot_instructions,
        model,
        dialog_logger_md,
        persist_bots=True,
        persist_threads=True,
    )
    await bot.initialize()
    await bot.basic_tool_loop(request, root_folder, tool_names, static_keep_going)
    logger.info(&#34;Run completed.&#34;)


if __name__ == &#34;__main__&#34;:
    asyncio.run(main())</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="ai_shell.demo_bots.tool_tester_bot.main"><code class="name flex">
<span>async def <span class="ident">main</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">async def main():
    load_dotenv()

    logger = logging.getLogger(__name__)
    config = ai_shell.configure_logging()
    logging.config.dictConfig(config)

    model = &#34;gpt-3.5-turbo-1106&#34;

    bot_instructions = &#34;You are a tool tester. You will test out tools and then provide a report on if they work the way you expected them to.&#34;
    tool_names = [
        &#34;query_todos_by_regex&#34;,
        &#34;remove_todo&#34;,
        &#34;add_todo&#34;,
        &#34;ls&#34;,
        &#34;cat_markdown&#34;,
        &#34;rewrite_file&#34;,
        &#34;write_new_file&#34;,
        &#34;grep&#34;,
        &#34;report_text&#34;,
        &#34;insert_text_after_context&#34;,
        &#34;insert_text_after_multiline_context&#34;,
        &#34;insert_text_at_start_or_end&#34;,
        &#34;replace_all&#34;,
        &#34;replace_line_by_line&#34;,
        &#34;replace_with_regex&#34;,
    ]
    bot_name = &#34;cat_markdown, insert, replace tool user.&#34;

    root_folder = &#34;src&#34;
    if not os.path.exists(root_folder):
        raise ValueError(&#34;The demo requires that there be a src folder with some python code in it.&#34;)
    dialog_logger_md = ai_shell.DialogLoggerWithMarkdown(root_folder)
    request = &#34;&#34;&#34;You are in the &#39;./&#39; folder. The base folder is &#39;./&#39;. You do not need to guess the pwd, it is &#39;./&#39;.

Now that is out of the way, use the tools available to you to make edits to files. Then check using tools to see if 
the edits worked the way you expected them to.

Report results using report_text. Then you are done.
```
    &#34;&#34;&#34;

    async def static_keep_going(_toolkit: ai_shell.ToolKit):
        return &#34;Do you feel that you have exercised all the tools? If so, report your results using report_text.&#34;

    config = ai_shell.Config()
    bot = ai_shell.TaskBot(
        config,
        bot_name,
        bot_instructions,
        model,
        dialog_logger_md,
        persist_bots=True,
        persist_threads=True,
    )
    await bot.initialize()
    await bot.basic_tool_loop(request, root_folder, tool_names, static_keep_going)
    logger.info(&#34;Run completed.&#34;)</code></pre>
</details>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="ai_shell.demo_bots" href="index.html">ai_shell.demo_bots</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="ai_shell.demo_bots.tool_tester_bot.main" href="#ai_shell.demo_bots.tool_tester_bot.main">main</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>